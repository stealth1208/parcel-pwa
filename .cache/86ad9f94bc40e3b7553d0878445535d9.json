{"dependencies":[{"name":"/Users/trong-khang/projects/trainings/pwa-parcel/package.json","includedInParent":true,"mtime":1560400697000}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=r;var e=\"service-worker.js\";function r(){\"serviceWorker\"in navigator&&window.addEventListener(\"load\",function(){navigator.serviceWorker.register(e).then(o).catch(function(e){return console.log(\"Can't register Service Worker\",e)})})}function o(e){if(navigator.serviceWorker.controller){var r=!1;navigator.serviceWorker.addEventListener(\"controllerchange\",function(e){r||(r=!0,window.location.reload())})}}","map":{"mappings":[{"source":"registerServiceWorker.js","original":{"line":54,"column":1},"generated":{"line":1,"column":0}},{"source":"registerServiceWorker.js","original":{"line":54,"column":1},"generated":{"line":1,"column":13}},{"source":"registerServiceWorker.js","original":{"line":54,"column":1},"generated":{"line":1,"column":20}},{"source":"registerServiceWorker.js","original":{"line":54,"column":1},"generated":{"line":1,"column":35}},{"source":"registerServiceWorker.js","original":{"line":54,"column":1},"generated":{"line":1,"column":43}},{"source":"registerServiceWorker.js","original":{"line":54,"column":1},"generated":{"line":1,"column":57}},{"source":"registerServiceWorker.js","original":{"line":54,"column":1},"generated":{"line":1,"column":64}},{"source":"registerServiceWorker.js","name":"registerServiceWorker","original":{"line":4,"column":24},"generated":{"line":1,"column":68}},{"source":"registerServiceWorker.js","name":"registerServiceWorker","original":{"line":4,"column":24},"generated":{"line":1,"column":76}},{"source":"registerServiceWorker.js","name":"registerServiceWorker","original":{"line":4,"column":24},"generated":{"line":1,"column":84}},{"source":"registerServiceWorker.js","original":{"line":2,"column":0},"generated":{"line":1,"column":86}},{"source":"registerServiceWorker.js","name":"SW_PATH","original":{"line":2,"column":6},"generated":{"line":1,"column":90}},{"source":"registerServiceWorker.js","original":{"line":2,"column":0},"generated":{"line":1,"column":92}},{"source":"registerServiceWorker.js","original":{"line":4,"column":15},"generated":{"line":1,"column":112}},{"source":"registerServiceWorker.js","name":"registerServiceWorker","original":{"line":4,"column":24},"generated":{"line":1,"column":121}},{"source":"registerServiceWorker.js","original":{"line":5,"column":8},"generated":{"line":1,"column":125}},{"source":"registerServiceWorker.js","name":"navigator","original":{"line":5,"column":27},"generated":{"line":1,"column":143}},{"source":"registerServiceWorker.js","name":"addEventListener","original":{"line":6,"column":9},"generated":{"line":1,"column":154}},{"source":"registerServiceWorker.js","name":"addEventListener","original":{"line":6,"column":9},"generated":{"line":1,"column":161}},{"source":"registerServiceWorker.js","original":{"line":6,"column":34},"generated":{"line":1,"column":178}},{"source":"registerServiceWorker.js","original":{"line":6,"column":34},"generated":{"line":1,"column":185}},{"source":"registerServiceWorker.js","name":"serviceWorker","original":{"line":7,"column":14},"generated":{"line":1,"column":196}},{"source":"registerServiceWorker.js","name":"serviceWorker","original":{"line":7,"column":14},"generated":{"line":1,"column":206}},{"source":"registerServiceWorker.js","name":"register","original":{"line":8,"column":7},"generated":{"line":1,"column":220}},{"source":"registerServiceWorker.js","name":"SW_PATH","original":{"line":8,"column":16},"generated":{"line":1,"column":229}},{"source":"registerServiceWorker.js","name":"then","original":{"line":9,"column":7},"generated":{"line":1,"column":232}},{"source":"registerServiceWorker.js","name":"onRegistration","original":{"line":9,"column":12},"generated":{"line":1,"column":237}},{"source":"registerServiceWorker.js","name":"catch","original":{"line":10,"column":7},"generated":{"line":1,"column":240}},{"source":"registerServiceWorker.js","original":{"line":10,"column":13},"generated":{"line":1,"column":246}},{"source":"registerServiceWorker.js","original":{"line":10,"column":13},"generated":{"line":1,"column":255}},{"source":"registerServiceWorker.js","name":"console","original":{"line":10,"column":22},"generated":{"line":1,"column":258}},{"source":"registerServiceWorker.js","name":"console","original":{"line":10,"column":22},"generated":{"line":1,"column":265}},{"source":"registerServiceWorker.js","name":"log","original":{"line":10,"column":30},"generated":{"line":1,"column":273}},{"source":"registerServiceWorker.js","name":"error","original":{"line":10,"column":67},"generated":{"line":1,"column":277}},{"source":"registerServiceWorker.js","name":"error","original":{"line":10,"column":67},"generated":{"line":1,"column":309}},{"source":"registerServiceWorker.js","original":{"line":35,"column":0},"generated":{"line":1,"column":316}},{"source":"registerServiceWorker.js","name":"onRegistration","original":{"line":35,"column":9},"generated":{"line":1,"column":325}},{"source":"registerServiceWorker.js","name":"registration","original":{"line":35,"column":24},"generated":{"line":1,"column":327}},{"source":"registerServiceWorker.js","original":{"line":37,"column":6},"generated":{"line":1,"column":330}},{"source":"registerServiceWorker.js","name":"navigator","original":{"line":37,"column":7},"generated":{"line":1,"column":333}},{"source":"registerServiceWorker.js","name":"serviceWorker","original":{"line":37,"column":17},"generated":{"line":1,"column":343}},{"source":"registerServiceWorker.js","name":"controller","original":{"line":37,"column":31},"generated":{"line":1,"column":357}},{"source":"registerServiceWorker.js","original":{"line":37,"column":6},"generated":{"line":1,"column":368}},{"source":"registerServiceWorker.js","name":"preventDevToolsReloadLoop","original":{"line":44,"column":6},"generated":{"line":1,"column":369}},{"source":"registerServiceWorker.js","name":"preventDevToolsReloadLoop","original":{"line":44,"column":6},"generated":{"line":1,"column":373}},{"source":"registerServiceWorker.js","original":{"line":44,"column":34},"generated":{"line":1,"column":376}},{"source":"registerServiceWorker.js","name":"serviceWorker","original":{"line":45,"column":12},"generated":{"line":1,"column":378}},{"source":"registerServiceWorker.js","name":"serviceWorker","original":{"line":45,"column":12},"generated":{"line":1,"column":388}},{"source":"registerServiceWorker.js","name":"addEventListener","original":{"line":45,"column":26},"generated":{"line":1,"column":402}},{"source":"registerServiceWorker.js","original":{"line":45,"column":63},"generated":{"line":1,"column":419}},{"source":"registerServiceWorker.js","original":{"line":45,"column":63},"generated":{"line":1,"column":438}},{"source":"registerServiceWorker.js","original":{"line":45,"column":72},"generated":{"line":1,"column":447}},{"source":"registerServiceWorker.js","name":"preventDevToolsReloadLoop","original":{"line":48,"column":8},"generated":{"line":1,"column":450}},{"source":"registerServiceWorker.js","original":{"line":49,"column":32},"generated":{"line":1,"column":454}},{"source":"registerServiceWorker.js","original":{"line":49,"column":32},"generated":{"line":1,"column":457}},{"source":"registerServiceWorker.js","name":"location","original":{"line":50,"column":11},"generated":{"line":1,"column":459}},{"source":"registerServiceWorker.js","name":"location","original":{"line":50,"column":11},"generated":{"line":1,"column":466}},{"source":"registerServiceWorker.js","name":"reload","original":{"line":50,"column":20},"generated":{"line":1,"column":475}}],"sources":{"registerServiceWorker.js":"\nconst SW_PATH = `service-worker.js`\n\nexport default function registerServiceWorker() {\n  if (!(`serviceWorker` in navigator)) return\n  window.addEventListener(`load`, () => {\n    navigator.serviceWorker\n      .register(SW_PATH)\n      .then(onRegistration)\n      .catch(error => console.log(`Can't register Service Worker`, error))\n  })\n}\n\n\n\n// https://redfin.engineering/how-to-fix-the-refresh-button-when-using-service-workers-a8e27af6df68#06d3\n// function listenForWaitingServiceWorker(registration, callback) {\n//   function awaitStateChange() {\n//     registration.installing.addEventListener(`statechange`, function() {\n//       if (this.state === `installed`) callback(registration)\n//     })\n//   }\n\n//   if (!registration) return\n\n//   if (registration.waiting) return callback(registration)\n\n//   if (registration.installing) awaitStateChange()\n\n//   registration.addEventListener(`updatefound`, () => {\n//     awaitStateChange()\n//   })\n// }\n\nfunction onRegistration(registration) {\n  // Track updates to the Service Worker.\n  if (!navigator.serviceWorker.controller) {\n    // The window client isn't currently controlled…\n    // …so it's a new service worker that will activate immediately\n    return\n  }\n\n  // When the user asks to refresh the UI, we'll need to reload the window\n  let preventDevToolsReloadLoop = false\n  navigator.serviceWorker.addEventListener(`controllerchange`, event => {\n    // Ensure refresh is only called once.\n    // This works around a bug in \"force update on reload\".\n    if (preventDevToolsReloadLoop) return\n    preventDevToolsReloadLoop = true\n    window.location.reload()\n  })\n\n  // listenForWaitingServiceWorker(registration, showRefreshUI)\n}"},"lineCount":null}},"hash":"0ba111eed2d2a6b732bfee19eee25e65","cacheData":{"env":{}},"id":7}